# Readme
## ■概要
銃の改造パーツや改造ソケットに新たな遊びを加えるModです。
銃や改造パーツに対して、プラチナ硬貨を支払うことで下記が可能になります。
・自由な改造パーツの取り外し
・改造ソケットの増加
・改造パーツの+値強化
・（2025/01/15追加）改造パーツの合体

## ■使用方法
銃身加速器のコンテキストメニュー（ミドルクリックメニュー）から
「GunSmith」を選択することで専用のアイテム選択メニューが開きます。
メニューで遠距離武器、改造パーツが選択できます。

## ■改造パーツ合成
（2025/01/15追加）
銃身加速器のコンテキストメニュー（ミドルクリックメニュー）から
「ModCombine」を選択することで専用のアイテム選択メニューが開きます。
同種類の改造パーツ２種類を合体する事で、通常の強化よりも少し割安に強化できます。（デフォルト係数は1.0で、通常強化の半分です）
いわゆるニコイチ的な要素で、本来不要となっていた余剰パーツに多少意味を持たせます。
どの順序で２つのパーツを選んでも+値が低いパーツがエサとして使用され、エサとして使用したパーツは消滅します。
（バランス調整の観点から、+値は強化と同様、+1ずつしか上がらないため注意してください）

## ■使用コストとコンフィグ
各種強化はプラチナ硬貨をコストとして支払います。
コストは下記で計算されます。
・改造ソケット増加 -- 現在ソケット数 * ソケット増加コスト（デフォルト100）
・改造パーツ+値強化 -- 現在のパーツ+値 * パーツ強化コスト（デフォルト2.0）
・改造パーツ合成 -- 高い方のパーツ+値 * パーツ強化コスト（デフォルト1.0）
なお、改造パーツ合成はコストとしてエサとなるパーツも消費します。

プレイヤーのコンテキストメニュー（ミドルクリックメニュー）から
「GunSmith設定」を選ぶことでコストのバランス調整が可能です。
好みやレベルに合わせて自由に調整してください。
コンフィグは下記ファイルを直接調整しても変更できます。
(Elinインストールフォルダ)\BepInEx\config\yu-ituki.elin.gun_smith.mod.cfg
 
## ■ソースコードの解説
GunSmithManager.cs のInitialize() で生成してる TraitGunSmith.cs や TraitModCombine.cs が処理の本体です。  
ModUIEntry.cs で銃身加速器のコンテキストメニューを拡張し、そこから各Traitを無理やり呼び出しています。  



